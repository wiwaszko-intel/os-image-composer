image:
  name: minimal-os-image-ubuntu
  version: "24.04"

target:
  os: ubuntu
  dist: ubuntu24
  arch: aarch64
  imageType: raw

# Sample list of additional package repositories; replace codename, url, and pkey values as needed
packageRepositories:
  - codename: "company-internal"
    url: "<URL>"
    pkey: "<PUBLIC_KEY_URL>" # Uncomment and replace in real config
    component: "main"

  - codename: "dev-tools"
    url: "<URL>"
    pkey: "<PUBLIC_KEY_URL>" # Uncomment and replace in real config

  - codename: "intel-openvino"
    url: "<URL>"
    pkey: "<PUBLIC_KEY_URL>" # Uncomment and replace in real config
    component: "restricted"

disk:
  name: Minimal_ubuntu_arm_Raw # 1:1 mapping to the systemConfigs name
  artifacts:
    -
      type: raw  # image file format, valid value [raw, vhd, vhdx, qcow2, vmdk, vdi]
      compression: gz # image compression format (optional)
  size: 4GiB # 4G, 4GB, 4096 MiB also valid. (Required for raw)
  partitionTableType: gpt # Partition table type, valid value: [gpt, mbr]
  partitions: # Required for raw, optional for ISO, not needed for rootfs.
    - id: boot
      type: esp
      flags:
        - esp
        - boot
      start:  1MiB
      end: 100MiB
      fsType: fat32
      mountPoint: /efi
      mountOptions: umask=0077

    - id: rootfs
      type: linux-root-amd64
      start: 1025MiB
      end: 3583MiB
      fsType: ext4
      mountPoint: /
      mountOptions: defaults

    - id: extendedboot
      type: xbootldr
      start: 101MiB
      end: 1024MiB 
      fsType: vfat
      mountPoint: /boot
      mountOptions: defaults

systemConfig:
  name: minimal
  description: Minimal ubuntu image

  immutability:
    enabled: false # default is true
    # To enable Secure Boot, provide the actual file paths for your environment below and uncomment the relevant lines.
    # secureBootDBKey: "<SECURE_BOOT_DB_KEY_PATH>"
    # secureBootDBCrt: "<SECURE_BOOT_DB_CRT_PATH>"
    # secureBootDBCer: "<SECURE_BOOT_DB_CER_PATH>"

  packages:
    - ubuntu-minimal
    - systemd-boot
    - dracut-core
    - systemd
    - cryptsetup-bin
    - openssh-server
    - systemd-resolved

  kernel:
    version: "6.14"
    cmdline: "console=ttyS0,115200 console=tty0 loglevel=7"
    packages:
      - linux-image-generic-hwe-24.04
