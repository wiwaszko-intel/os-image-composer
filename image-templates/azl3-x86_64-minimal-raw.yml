# AI-searchable metadata for template discovery
metadata:
  description: "Azure Linux 3 minimal raw disk image with essential packages for lightweight cloud and edge deployments"
  use_cases:
    - "lightweight azure deployment"
    - "minimal cloud image"
    - "azure edge node"
    - "mariner-based edge"
  keywords:
    - minimal
    - raw
    - azure
    - azl3
    - cloud
    - mariner
    - lightweight

image:
  name: azl3-x86_64-minimal
  version: "1.0.0"

target:
  os: azure-linux # Target OS name
  dist: azl3 # Target OS distribution
  arch: x86_64 # Target OS architecture
  imageType: raw # Image type, valid value: [raw, iso].

disk:
  name: Minimal_Raw # 1:1 mapping to the systemConfigs name
  artifacts:
    -
      type: raw  # image file format, valid value [raw, vhd, vhdx, qcow2, vmdk, vdi]
      compression: gz # image compression format (optional)
    - type: vhdx
  size: 4GiB # 4G, 4GB, 4096 MiB also valid. (Required for raw)
  partitionTableType: gpt # Partition table type, valid value: [gpt, mbr]
  partitions: # Required for raw, optional for ISO, not needed for rootfs.
    - id: boot
      type: esp
      flags:
        - esp
        - boot
      start: 1MiB
      end: 513MiB
      fsType: fat32
      mountPoint: /boot/efi
      mountOptions: umask=0077

    - id: rootfs
      type: linux-root-amd64
      start: 513MiB
      end: "0"
      fsType: ext4
      mountPoint: /
      mountOptions: defaults

systemConfig:
  name: Minimal_Raw
  description: Default yml configuration for raw image

  immutability:
    enabled: false # default is true, overridden to false here