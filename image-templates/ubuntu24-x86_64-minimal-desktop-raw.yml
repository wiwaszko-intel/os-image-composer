# AI-searchable metadata for template discovery
metadata:
  description: Ubuntu 24.04 minimal desktop image with GUI for workstation deployments
  use_cases:
    - Desktop workstations
    - Kiosk systems
    - Development machines with GUI
    - Graphical edge displays
  keywords:
    - desktop
    - gui
    - workstation
    - kiosk
    - display
    - graphical
    - ubuntu

image:
  name: minimal-desktop-ubuntu
  version: "24.04"

target:
  os: ubuntu
  dist: ubuntu24
  arch: x86_64
  imageType: raw

# Disk layout and output artifact definition
disk:
  # Human friendly name logged by builders
  name: minimal-desktop-ubuntu
  artifacts:
    # Request conversion to raw
    - type: raw
      compression: gz
  size: 3GiB
  # GPT partition table per installer spec
  partitionTableType: gpt
  partitions:
    # EFI system partition for bootloaders
    - id: EFI
      name: EFI
      type: esp
      # GPT type GUID for EFI system partition
      typeUUID: c12a7328-f81f-11d2-ba4b-00a0c93ec93b
      fsType: vfat
      # Builder expects explicit MiB offsets
      start: 1MiB
      end: 106MiB
      mountPoint: /boot/efi
      mountOptions: defaults
      flags:
        - boot
        - esp
    # Dedicated /boot to host kernels and bootloader assets
    - id: BOOT
      name: BOOT
      type: linux
      # GPT GUID for Linux /boot partition
      typeUUID: bc13c2ff-59e6-4262-a352-b275fd6f7172
      fsType: ext4
      start: 106MiB
      end: 500MiB
      mountPoint: /boot
      mountOptions: defaults
      flags: []
    # Root filesystem filling remainder of disk
    - id: ROOT
      name: ROOT
      type: linux-root-amd64
      # Standard Linux root filesystem GUID for x86_64
      typeUUID: 4f68bce3-e8cd-4db1-96e7-fbcaf984b709
      fsType: ext4
      start: 500MiB
      end: "0"
      mountPoint: /
      mountOptions: defaults
      flags: []

systemConfig:
  name: minimal
  description: Minimal desktop ubuntu image

  bootloader:
    bootType: efi
    provider: grub

  immutability:
    enabled: false # default is true

  packages:
    - bsdutils
    - debianutils
    - diffutils
    - findutils
    - grep
    - gzip
    - libattr1
    - linux-base
    - mawk
    - ncurses-base
    - ncurses-bin
    - shim-signed
    - ubuntu-minimal
    - ubuntu-desktop-minimal
    - systemd
    - openssh-server
    - systemd-resolved
    - util-linux
    - udev
    - linux-firmware
    - initramfs-tools
    - grub-pc-bin
    - grub-efi-amd64-bin
    - efibootmgr
  
  kernel:
    version: "6.14"
    cmdline: "console=ttyS0,115200 console=tty0 loglevel=7"
    packages:
      - linux-image-generic-hwe-24.04
